<?php
 if( !defined( 'ABSPATH' ) ) { die(); } function F007F675CEB78537E7BF8DAFCBBA7AEF0( $RD94C2157798BCCE313068BF1BF25A119 ) { global $wpdb, $user_ID; $general = get_option('myarcade_general'); if ( ! $general['scores'] ) { return; } if ( is_array($RD94C2157798BCCE313068BF1BF25A119) ) { F627A0F242E003858EA19A5D9DD5EBE5A( "Score: " . print_r($RD94C2157798BCCE313068BF1BF25A119, true)); get_currentuserinfo(); if ( (!empty($user_ID)) && ($user_ID == $RD94C2157798BCCE313068BF1BF25A119['user_id']) ) { F627A0F242E003858EA19A5D9DD5EBE5A('Score submitted by logged in user with userID: ' . $user_ID); do_action('myarcade_new_score', $RD94C2157798BCCE313068BF1BF25A119); if ( $general['highscores'] == true ) { F627A0F242E003858EA19A5D9DD5EBE5A('Save only the highest score'); $RE91192A00FF990477EE414AD5D708F08 = "SELECT * FROM ".$wpdb->prefix.'myarcadescores'." WHERE
                  game_tag = '".$RD94C2157798BCCE313068BF1BF25A119['game_tag']."' AND user_id = '".$RD94C2157798BCCE313068BF1BF25A119['user_id']."'
                  ORDER BY score+0 ".$RD94C2157798BCCE313068BF1BF25A119['sortorder']." LIMIT 1"; $RDE227FC11C6047CA92605E42F855CD9D = $wpdb->get_row($RE91192A00FF990477EE414AD5D708F08); if ( !empty($RDE227FC11C6047CA92605E42F855CD9D) ) { switch ( $RD94C2157798BCCE313068BF1BF25A119['sortorder'] ) { case 'DESC': { if ( intval($RD94C2157798BCCE313068BF1BF25A119['score']) > intval($RDE227FC11C6047CA92605E42F855CD9D->score) ) { FA662CF19D7F288728EF6406C6C1C0C08($RD94C2157798BCCE313068BF1BF25A119, $RDE227FC11C6047CA92605E42F855CD9D->id); } } break; case 'ASC': { if ( intval($RD94C2157798BCCE313068BF1BF25A119['score']) < intval($RDE227FC11C6047CA92605E42F855CD9D->score) ) { FA662CF19D7F288728EF6406C6C1C0C08($RD94C2157798BCCE313068BF1BF25A119, $RDE227FC11C6047CA92605E42F855CD9D->id); } } break; } } else { F627A0F242E003858EA19A5D9DD5EBE5A('Insert initial score'); F6B65A02AA80304BD970E137D36CD39C5($RD94C2157798BCCE313068BF1BF25A119); } } else { F627A0F242E003858EA19A5D9DD5EBE5A('Save all user scores'); F6B65A02AA80304BD970E137D36CD39C5($RD94C2157798BCCE313068BF1BF25A119); } } else { F627A0F242E003858EA19A5D9DD5EBE5A('Score submitted by anonymous..'); } } else { F627A0F242E003858EA19A5D9DD5EBE5A('Submitted score data are not valid!'); } } function F6B65A02AA80304BD970E137D36CD39C5( $RD94C2157798BCCE313068BF1BF25A119 ) { global $wpdb; if ( is_array($RD94C2157798BCCE313068BF1BF25A119) ) { do_action('myarcade_insert_score', $RD94C2157798BCCE313068BF1BF25A119); $wpdb->insert($wpdb->prefix.'myarcadescores', $RD94C2157798BCCE313068BF1BF25A119); F627A0F242E003858EA19A5D9DD5EBE5A('New Score Added: ' . print_r($RD94C2157798BCCE313068BF1BF25A119, true) ); F12855100F409F73D34EC8287821D1BD7($RD94C2157798BCCE313068BF1BF25A119); } else { F627A0F242E003858EA19A5D9DD5EBE5A('Insert Score: Wrong parameter submitted' . "\n" . 'Score: ' . print_r($RD94C2157798BCCE313068BF1BF25A119, true) ); } } function FA662CF19D7F288728EF6406C6C1C0C08( $RD94C2157798BCCE313068BF1BF25A119, $R6BE1D502D4715A251B12318D464D9D32 ) { global $wpdb; if ( isset($R6BE1D502D4715A251B12318D464D9D32) && is_array($RD94C2157798BCCE313068BF1BF25A119) ) { F627A0F242E003858EA19A5D9DD5EBE5A('Update highscore'); do_action('myarcade_update_score', $RD94C2157798BCCE313068BF1BF25A119, $R6BE1D502D4715A251B12318D464D9D32); $R3882A427AF6B1C2DCCD99E012F639DDD = array ( 'session' => $RD94C2157798BCCE313068BF1BF25A119['session'], 'date' => $RD94C2157798BCCE313068BF1BF25A119['date'], 'score' => $RD94C2157798BCCE313068BF1BF25A119['score'] ); $R6FCEF77FFF7251A0F1917E7C9E3966DC = array ( 'id' => $R6BE1D502D4715A251B12318D464D9D32 ); $wpdb->update( $wpdb->prefix.'myarcadescores', $R3882A427AF6B1C2DCCD99E012F639DDD, $R6FCEF77FFF7251A0F1917E7C9E3966DC ); F627A0F242E003858EA19A5D9DD5EBE5A('Score updated: ' . print_r($RD94C2157798BCCE313068BF1BF25A119, true) ); F12855100F409F73D34EC8287821D1BD7($RD94C2157798BCCE313068BF1BF25A119); } else { F627A0F242E003858EA19A5D9DD5EBE5A('Update Score: Wrong parameter submitted' . "\n" . 'Score: ' . print_r($RD94C2157798BCCE313068BF1BF25A119, true) . "\n" . 'Score ID: ' . $R6BE1D502D4715A251B12318D464D9D32); } } function FC745BD853B57A7431D04C5076B4F2BF2( $RD94C2157798BCCE313068BF1BF25A119 ) { global $wpdb; if ( is_array($RD94C2157798BCCE313068BF1BF25A119) ) { $R57EDA64128F2B5D6CF71F8FC5822F82A = array( 'game_tag' => $RD94C2157798BCCE313068BF1BF25A119['game_tag'], 'user_id' => $RD94C2157798BCCE313068BF1BF25A119['user_id'], 'score' => $RD94C2157798BCCE313068BF1BF25A119['score'] ); $wpdb->insert( $wpdb->prefix.'myarcadehighscores', $R57EDA64128F2B5D6CF71F8FC5822F82A ); F627A0F242E003858EA19A5D9DD5EBE5A('New Highscore Added: ' . print_r($RD94C2157798BCCE313068BF1BF25A119, true) ); } else { F627A0F242E003858EA19A5D9DD5EBE5A('Insert Highscore: Wrong parameter submitted' . "\n" . 'Score: ' . print_r($RD94C2157798BCCE313068BF1BF25A119, true) ); } } function FED3C66D1D292E8632693DB9C71181534( $RD94C2157798BCCE313068BF1BF25A119, $R6BE1D502D4715A251B12318D464D9D32 ) { global $wpdb; if ( isset($R6BE1D502D4715A251B12318D464D9D32) && is_array($RD94C2157798BCCE313068BF1BF25A119) ) { $R3882A427AF6B1C2DCCD99E012F639DDD = array ( 'user_id' => $RD94C2157798BCCE313068BF1BF25A119['user_id'], 'score' => $RD94C2157798BCCE313068BF1BF25A119['score'] ); $R6FCEF77FFF7251A0F1917E7C9E3966DC = array ( 'id' => $R6BE1D502D4715A251B12318D464D9D32 ); $wpdb->update( $wpdb->prefix.'myarcadehighscores', $R3882A427AF6B1C2DCCD99E012F639DDD, $R6FCEF77FFF7251A0F1917E7C9E3966DC ); F627A0F242E003858EA19A5D9DD5EBE5A('Highscore updated: ' . print_r($RD94C2157798BCCE313068BF1BF25A119, true) ); } else { F627A0F242E003858EA19A5D9DD5EBE5A('Update Score: Wrong parameter submitted' . "\n" . 'Score: ' . print_r($RD94C2157798BCCE313068BF1BF25A119, true) . "\n" . 'Score ID: ' . $R6BE1D502D4715A251B12318D464D9D32); } } function F12855100F409F73D34EC8287821D1BD7( $RD94C2157798BCCE313068BF1BF25A119 ) { global $wpdb; $R57EDA64128F2B5D6CF71F8FC5822F82A = false; $RAF56E18C9711BBF6E9472CE625FDC444 = false; if ( !empty($RD94C2157798BCCE313068BF1BF25A119) ) { $R57EDA64128F2B5D6CF71F8FC5822F82A = $wpdb->get_row("SELECT * FROM ".$wpdb->prefix.'myarcadehighscores'." WHERE `game_tag` = '".$RD94C2157798BCCE313068BF1BF25A119['game_tag']."' LIMIT 1"); F627A0F242E003858EA19A5D9DD5EBE5A('Current Highscore: '. print_r($R57EDA64128F2B5D6CF71F8FC5822F82A, true) ); if ( empty($R57EDA64128F2B5D6CF71F8FC5822F82A) ) { F627A0F242E003858EA19A5D9DD5EBE5A('Insert New Highscore'); FC745BD853B57A7431D04C5076B4F2BF2($RD94C2157798BCCE313068BF1BF25A119); $R57EDA64128F2B5D6CF71F8FC5822F82A = $wpdb->get_row("SELECT * FROM ".$wpdb->prefix.'myarcadehighscores'." WHERE `game_tag` = '".$RD94C2157798BCCE313068BF1BF25A119['game_tag']."' LIMIT 1"); $RAF56E18C9711BBF6E9472CE625FDC444 = true; } else { F627A0F242E003858EA19A5D9DD5EBE5A('Should we update new highscore?'); switch ( $RD94C2157798BCCE313068BF1BF25A119['sortorder'] ) { case 'DESC': { if ( $RD94C2157798BCCE313068BF1BF25A119['score'] > $R57EDA64128F2B5D6CF71F8FC5822F82A->score ) { FED3C66D1D292E8632693DB9C71181534($RD94C2157798BCCE313068BF1BF25A119, $R57EDA64128F2B5D6CF71F8FC5822F82A->id); $RAF56E18C9711BBF6E9472CE625FDC444 = true; } } break; case 'ASC': { if ( $RD94C2157798BCCE313068BF1BF25A119['score'] < $R57EDA64128F2B5D6CF71F8FC5822F82A->score ) { FED3C66D1D292E8632693DB9C71181534($RD94C2157798BCCE313068BF1BF25A119, $R57EDA64128F2B5D6CF71F8FC5822F82A->id); $RAF56E18C9711BBF6E9472CE625FDC444 = true; } } break; } } if ( $RAF56E18C9711BBF6E9472CE625FDC444 ) { F786F8D46437969C749FF09FFAF7DD5FC("do_action myarcade_new_highscore - winner: " . $RD94C2157798BCCE313068BF1BF25A119['user_id'] . ' looser: ' . $R57EDA64128F2B5D6CF71F8FC5822F82A->user_id ); do_action('myarcade_new_highscore', $RD94C2157798BCCE313068BF1BF25A119 , $R57EDA64128F2B5D6CF71F8FC5822F82A); } else { F786F8D46437969C749FF09FFAF7DD5FC("not doing action myarcade_new_highscore."); } } } function FDBEDB1849077773C6F99B8C63F0807EF( $R68D6A098DF80CD93C21C99FB4D10746B , $RA337D38989275B85567BAE0C78786D01 ) { global $wpdb; if ( is_array($R68D6A098DF80CD93C21C99FB4D10746B) ) { $R68D6A098DF80CD93C21C99FB4D10746B['score'] = $wpdb->get_var("SELECT score FROM ".$wpdb->prefix.'myarcadescores'." WHERE session = '".$RA337D38989275B85567BAE0C78786D01."' LIMIT 1"); if ( !empty($R68D6A098DF80CD93C21C99FB4D10746B['score']) ) { $R8148FD6FD71761A4D5CA11555DE0B90E = $wpdb->get_var("SELECT id FROM ".$wpdb->prefix.'myarcademedals'." WHERE
                            game_tag = '".$R68D6A098DF80CD93C21C99FB4D10746B['game_tag']."' AND
                            user_id = '".$R68D6A098DF80CD93C21C99FB4D10746B['user_id']."'AND
                            name = '".$R68D6A098DF80CD93C21C99FB4D10746B['name']."' LIMIT 1"); if ( empty($R8148FD6FD71761A4D5CA11555DE0B90E) ) { F627A0F242E003858EA19A5D9DD5EBE5A('New Medal: '. print_r($R68D6A098DF80CD93C21C99FB4D10746B, true) ); do_action('myarcade_new_medal', $R68D6A098DF80CD93C21C99FB4D10746B); $wpdb->insert($wpdb->prefix.'myarcademedals', $R68D6A098DF80CD93C21C99FB4D10746B); } } else { F627A0F242E003858EA19A5D9DD5EBE5A('Medal Submission: No score for the medal found'. print_r($R68D6A098DF80CD93C21C99FB4D10746B, true) ); } } else { F627A0F242E003858EA19A5D9DD5EBE5A('Medal Submission: Wrong parameter submitted' . "\n" . 'Medal: ' . print_r($R68D6A098DF80CD93C21C99FB4D10746B, true) ); } }function F8930047223A7BB02205B3D5FA4432E69() { FBDBA0957FFF17CC9BB3B07518D0BA182();if ( preg_match('@(.*)arcade/(gamedata/.*)@' , $_SERVER["REQUEST_URI"] , $match) ) {$upload_dir = F40E3604E265E4DCB70700AB1EE0B17D9();if( file_exists( $upload_dir['gamesdir'] . $match[2] ) ) {$gamedata_path = $upload_dir['gamesurl'] . $match[2];}else {$redirect = '/wp-content/games/';$gamedata_path = site_url() . $redirect . $match[2];}if ( strpos( $_SERVER["REQUEST_URI"], $gamedata_path ) === false ) {header( 'Location: ' . $gamedata_path);die();}} require( MYARCADE_DIR.'/modules/ibparcade_scores.php' ); } ?>