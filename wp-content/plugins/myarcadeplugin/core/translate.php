<?php
 if( !defined( 'ABSPATH' ) ) { die(); } function FB5F0BF79F4EA70025A70BF0AD6525259() { global $myarcade_feedback; $general = get_option('myarcade_general'); if ( empty($general['bingid']) || empty($general['bingsecret']) ) { $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Microsoft Translator", 'myarcadeplugin') .": ". __("Cliend ID or Secret Key missing!", 'myarcadeplugin') ); return false; } $R9C5DE6A20FCDC76D2B9909875C31AFF4 = get_transient('myarcade_bing_token'); if ( $R9C5DE6A20FCDC76D2B9909875C31AFF4 ) { F25C41ABD32390615A31447242F176B34( "Microsoft Translator - Cached Token Found: " . print_r($R9C5DE6A20FCDC76D2B9909875C31AFF4, true) ); return $R9C5DE6A20FCDC76D2B9909875C31AFF4; } $R9FE302BDF914868081913A22F58F9E7E = array ( 'grant_type' => 'client_credentials', 'scope' => 'http://api.microsofttranslator.com', 'client_id' => $general['bingid'], 'client_secret' => $general['bingsecret'] ); $R04DC9A31C8FE0CD27C4C4A1066AEFCD5 = wp_remote_post( 'https://datamarket.accesscontrol.windows.net/v2/OAuth2-13/' , array( 'timeout' => 45, 'sslverify' => false, 'body' => $R9FE302BDF914868081913A22F58F9E7E ) ); if( is_wp_error( $R04DC9A31C8FE0CD27C4C4A1066AEFCD5 ) ) { F25C41ABD32390615A31447242F176B34("Microsoft Translator - Request Token Error: ". $R04DC9A31C8FE0CD27C4C4A1066AEFCD5->get_error_message() ); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Microsoft Translator", 'myarcadeplugin') .": ".$R04DC9A31C8FE0CD27C4C4A1066AEFCD5->get_error_message() ); } else { $R9C5DE6A20FCDC76D2B9909875C31AFF4 = json_decode( wp_remote_retrieve_body( $R04DC9A31C8FE0CD27C4C4A1066AEFCD5 ) ); F25C41ABD32390615A31447242F176B34("Microsoft Translator - New Token: ". print_r($R9C5DE6A20FCDC76D2B9909875C31AFF4, true) ); if ( isset($R9C5DE6A20FCDC76D2B9909875C31AFF4->error) && !empty($R9C5DE6A20FCDC76D2B9909875C31AFF4->error) ) { F25C41ABD32390615A31447242F176B34("Microsoft Translator - New Token - ERROR: ". print_r($R9C5DE6A20FCDC76D2B9909875C31AFF4->error, true) ); F25C41ABD32390615A31447242F176B34("Microsoft Translator - New Token - ERROR Description: ". print_r($R9C5DE6A20FCDC76D2B9909875C31AFF4->error_description, true) ); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Microsoft Translator", 'myarcadeplugin') .": ". $R9C5DE6A20FCDC76D2B9909875C31AFF4->error_description ); } else { $RB294963C497FEFB1221ABBDA9649D167 = 60 * 8; set_transient('myarcade_bing_token', $R9C5DE6A20FCDC76D2B9909875C31AFF4->access_token, $RB294963C497FEFB1221ABBDA9649D167); F25C41ABD32390615A31447242F176B34("Microsoft Translator - Set transient: 'myarcade_bing_token', Expiration: " .$RB294963C497FEFB1221ABBDA9649D167. " sec."); return $R9C5DE6A20FCDC76D2B9909875C31AFF4->access_token; } } return false; } function FDC2EE3BA4BB067E1A7D5B14B7A1DAEFC($R3F243E13444F693A59F15AA5D424B3BE = '') { global $myarcade_feedback; $R52BDCEC8A28997389249234E5E3BF202 = ''; if ( empty($R3F243E13444F693A59F15AA5D424B3BE) ) { return false; } if ( !FDA2E343504241894F42B5F23BC2A9227($myarcade_feedback) ) { $myarcade_feedback = new MyAracade_Feedback(); } $R185F7CD086AFAD484A334CB45591BFAB = FB5F0BF79F4EA70025A70BF0AD6525259(); if ( $R185F7CD086AFAD484A334CB45591BFAB ) { $general = get_option('myarcade_general'); $RE5F28106A02467157A142465003777FE = "Authorization: Bearer ". $R185F7CD086AFAD484A334CB45591BFAB; $RF93417BF09CF71F8DDB9DBDDB13818E7 = "Bearer ". $R185F7CD086AFAD484A334CB45591BFAB; $url = "http://api.microsofttranslator.com/v2/Http.svc/Translate?appId=".urlencode($RF93417BF09CF71F8DDB9DBDDB13818E7)."&text=".urlencode($R3F243E13444F693A59F15AA5D424B3BE)."&to=".$general['translate_to']; F25C41ABD32390615A31447242F176B34("Microsot Translator - Original Text: " . $R3F243E13444F693A59F15AA5D424B3BE); if ( function_exists('curl_init') ) { $R83A253518CA7E08752DBE5B5D61FAA78 = curl_init(); curl_setopt ($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_URL, $url); curl_setopt ($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_HTTPHEADER, array($RE5F28106A02467157A142465003777FE, "Content-Type: text/xml")); curl_setopt ($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt ($R83A253518CA7E08752DBE5B5D61FAA78, CURLOPT_SSL_VERIFYPEER, FALSE); $R04DC9A31C8FE0CD27C4C4A1066AEFCD5 = curl_exec($R83A253518CA7E08752DBE5B5D61FAA78); $RF9EC8920F2269834A231F5BF780BE914 = curl_errno($R83A253518CA7E08752DBE5B5D61FAA78); $R8FE8539B09C3010126B0765EC96F60D7 = curl_error($R83A253518CA7E08752DBE5B5D61FAA78); curl_close($R83A253518CA7E08752DBE5B5D61FAA78); if ($RF9EC8920F2269834A231F5BF780BE914) { F25C41ABD32390615A31447242F176B34("Microsoft Translator - cURL Error: " .$RF9EC8920F2269834A231F5BF780BE914." - ".$R8FE8539B09C3010126B0765EC96F60D7); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Microsoft Translator", 'myarcadeplugin') .": ". $R8FE8539B09C3010126B0765EC96F60D7); } else { if( is_wp_error( $R04DC9A31C8FE0CD27C4C4A1066AEFCD5 ) ) { F25C41ABD32390615A31447242F176B34("Microsoft Translator - cURL Error: " .$R04DC9A31C8FE0CD27C4C4A1066AEFCD5->get_error_message() ); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Microsoft Translator", 'myarcadeplugin') .": ".$R04DC9A31C8FE0CD27C4C4A1066AEFCD5->get_error_message() ); } else { $R7C739A71B3187AFE12FAE9CA75AB1A04 = simplexml_load_string($R04DC9A31C8FE0CD27C4C4A1066AEFCD5); F25C41ABD32390615A31447242F176B34("Microsoft Translator - xmlObj Rceived: " .print_r($R7C739A71B3187AFE12FAE9CA75AB1A04, true) ); if ( isset($R7C739A71B3187AFE12FAE9CA75AB1A04[0]->body->h1) ) { switch ($R7C739A71B3187AFE12FAE9CA75AB1A04[0]->body->h1) { case 'TranslateApiException': { F25C41ABD32390615A31447242F176B34("Microsoft Translator - TranslateApiException: " . $R7C739A71B3187AFE12FAE9CA75AB1A04[0]->body->p[1] ); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Microsoft Translator", 'myarcadeplugin') .": ".$R7C739A71B3187AFE12FAE9CA75AB1A04[0]->body->p[1] ); return false; } break; case 'Argument Exception': { F25C41ABD32390615A31447242F176B34("Microsoft Translator - Argument Exception: " . $R7C739A71B3187AFE12FAE9CA75AB1A04[0]->body->p[2] ); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Microsoft Translator", 'myarcadeplugin') .": ".$R7C739A71B3187AFE12FAE9CA75AB1A04[0]->body->p[2] ); return false; } break; } } foreach((array) $R7C739A71B3187AFE12FAE9CA75AB1A04[0] as $R244F38266C59587D696AEC08A771B803) { $R52BDCEC8A28997389249234E5E3BF202 = $R244F38266C59587D696AEC08A771B803; } F25C41ABD32390615A31447242F176B34("Microsoft Translator - Translated Text: " . $R52BDCEC8A28997389249234E5E3BF202); } } } else { F25C41ABD32390615A31447242F176B34("Microsoft Translator - cURL not found! You need cURL to be able to the translator!"); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Microsoft Translator", 'myarcadeplugin') .": ". __("cURL is required!") ); } } else { F25C41ABD32390615A31447242F176B34("Microsoft Translator - No Valid Access Token"); } return !empty($R52BDCEC8A28997389249234E5E3BF202) ? $R52BDCEC8A28997389249234E5E3BF202 : false; } function FFE84EB5F1E7311B80940E1BD0383B963($R3F243E13444F693A59F15AA5D424B3BE) { global $myarcade_feedback; $R679E9B9234E2062F809DBD3325D37FB6 = false; $general = get_option('myarcade_general'); if ( !empty($general['google_id']) ) { F25C41ABD32390615A31447242F176B34("Google Translator - Original Text: " . $R3F243E13444F693A59F15AA5D424B3BE); $R8C2578958C407E0D2623B3F10C9A860A = array('\\\\\\\"', '\\\\\"','\\\\n', '\\\\r', '\\\\t', '\\\\$','\\0', "\\'", '\\\\'); $RFA5A24486053F6B0FA6A96DC6F407994 = array('\"', '"', "\n", "\r", "\\t", "\\$", "\0", "'", "\\"); $R3F243E13444F693A59F15AA5D424B3BE = str_replace( $R8C2578958C407E0D2623B3F10C9A860A, $RFA5A24486053F6B0FA6A96DC6F407994, $R3F243E13444F693A59F15AA5D424B3BE ); add_filter('https_ssl_verify', '__return_false'); $url = "https://www.googleapis.com/language/translate/v2?key=".$general['google_id']."&source=en&target=".$general['google_translate_to']."&q=".urlencode($R3F243E13444F693A59F15AA5D424B3BE); $RD2111E34FD8C5DAFF00C9890B3AB83BC = F6F8EB9DF17613F857E74D2C8D503672D($url); F25C41ABD32390615A31447242F176B34("Google Translator - Response: " . print_r($RD2111E34FD8C5DAFF00C9890B3AB83BC, true) ); if ( !isset($RD2111E34FD8C5DAFF00C9890B3AB83BC['error']) ) { $R04DC9A31C8FE0CD27C4C4A1066AEFCD5 = json_decode($RD2111E34FD8C5DAFF00C9890B3AB83BC['response']); if ( isset($R04DC9A31C8FE0CD27C4C4A1066AEFCD5->error) ) { F25C41ABD32390615A31447242F176B34("Google Translator - Response Error: " . $R04DC9A31C8FE0CD27C4C4A1066AEFCD5->error->code . " - " . $R04DC9A31C8FE0CD27C4C4A1066AEFCD5->error->message ); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Google Translation Error", 'myarcadeplugin') . ": " .$R04DC9A31C8FE0CD27C4C4A1066AEFCD5->error->code . " - " . $R04DC9A31C8FE0CD27C4C4A1066AEFCD5->error->message ); } else { if ( isset($R04DC9A31C8FE0CD27C4C4A1066AEFCD5->data) && isset($R04DC9A31C8FE0CD27C4C4A1066AEFCD5->data->translations) && isset($R04DC9A31C8FE0CD27C4C4A1066AEFCD5->data->translations[0]->translatedText) ) { $R679E9B9234E2062F809DBD3325D37FB6 = $R04DC9A31C8FE0CD27C4C4A1066AEFCD5->data->translations[0]->translatedText; F25C41ABD32390615A31447242F176B34("Google Translator - Translated Text: " . $R679E9B9234E2062F809DBD3325D37FB6); } else { $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Google Translation Error", 'myarcadeplugin') . ": " . __("Unknown Error", 'myarcadeplugin') ); } } } else { F25C41ABD32390615A31447242F176B34("Google Translator - Response Error: " . $RD2111E34FD8C5DAFF00C9890B3AB83BC['error'] ); $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Google Translation Error", 'myarcadeplugin') . ": " .$RD2111E34FD8C5DAFF00C9890B3AB83BC['error']); } } else { F25C41ABD32390615A31447242F176B34("Google Translator - Google API Key not provided."); } return $R679E9B9234E2062F809DBD3325D37FB6; } function FD534B171CE70857BCD1CDF656A5850BD($RE82EE9B121F709895EF54EBA7FA6B78B) { global $myarcade_feedback; $R679E9B9234E2062F809DBD3325D37FB6 = false; $general = get_option('myarcade_general'); switch ( $general['translation'] ) { case 'google': { $R679E9B9234E2062F809DBD3325D37FB6 = FFE84EB5F1E7311B80940E1BD0383B963($RE82EE9B121F709895EF54EBA7FA6B78B); } break; case 'microsoft': { $R679E9B9234E2062F809DBD3325D37FB6 = FDC2EE3BA4BB067E1A7D5B14B7A1DAEFC($RE82EE9B121F709895EF54EBA7FA6B78B); } break; default: { $myarcade_feedback->F12C73D1B465E39C31D3A2333B5E23252( __("Translation service not selected!", 'myarcadeplugin') ); } } if ( empty($R679E9B9234E2062F809DBD3325D37FB6) ) { $R679E9B9234E2062F809DBD3325D37FB6 = false; } return $R679E9B9234E2062F809DBD3325D37FB6; } ?>